{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eli7pm/customFonts.PSPDFKit/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/eli7pm/customFonts.PSPDFKit/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/eli7pm/customFonts.PSPDFKit/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect,useRef}from'react';import{dataMap}from'../components/Config';//const dataMap = {};\nimport{jsx as _jsx}from\"react/jsx-runtime\";var userName='Дарина Кравчук. Тернопільська ЗОШ №16';//const userPassword = '';\n//var arrData = [];\nvar fetcher=function fetcher(fontFileName){return fetch(fontFileName).then(function(r){if(r.status===200){return r.blob();}else{throw new Error();}});};export default function PdfViewerComponent(props){var containerRef=useRef(null);var customFontsRef=useRef(null);useEffect(function(){var container=containerRef.current;var instance,PSPDFKit;_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var themeFile,customFonts;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return import('pspdfkit');case 2:PSPDFKit=_context.sent;themeFile=PSPDFKit.Theme.DARK;customFonts=[\"CENSCBK.TTF\"].map(function(font){return new PSPDFKit.Font({name:font,callback:fetcher});});customFontsRef.current=customFontsRef.current||customFonts;_context.next=8;return PSPDFKit.load({//Api Key\n//licensekey: 'pdf_live_eSDqTB2aIiliYAbvHfhZVa9YjorkV95d0aXzPpKuEMS',\nlicenseKey:\"\",// Container where PSPDFKit should be mounted.\ncontainer:container,// The document to open.\ndocument:props.document,// Theme file\ntheme:themeFile,autoSaveMode:PSPDFKit.AutoSaveMode.INTELLIGENT,customFonts:customFontsRef.current,//password: userPassword,\n// Use the public directory URL as a base URL. PSPDFKit will download its library assets from here.\nbaseUrl:\"\".concat(window.location.protocol,\"//\").concat(window.location.host,\"/\").concat(process.env.PUBLIC_URL),//password: \"secr3t\",\ntoolbarItems:[].concat(_toConsumableArray(PSPDFKit.defaultToolbarItems),[{type:\"form-creator\"}]),// Watermark\nrenderPageCallback:function renderPageCallback(ctx,pageIndex,pageSize){ctx.font=\"14px Arial\";ctx.fillStyle=\"grey\";ctx.textAlign=\"center\";ctx.fillText(userName,pageSize.width/2,pageSize.height-13);}});case 8:instance=_context.sent;// Lock print and download\ninstance.setToolbarItems(function(items){return items.filter(function(item){return item.type!==\"export-pdf\";});});instance.setToolbarItems(function(items){return items.filter(function(item){return item.type!==\"print\";});});instance.setToolbarItems(function(items){return items.filter(function(item){return item.type!==\"signature\";});});instance.setToolbarItems(function(items){return items.filter(function(item){return item.type!==\"document-editor\";});});instance.setToolbarItems(function(items){return items.filter(function(item){return item.type!==\"document-crop\";});});instance.setToolbarItems(function(items){return items.filter(function(item){return item.type!==\"line\";});});instance.setToolbarItems(function(items){return items.filter(function(item){return item.type!==\"ink-eraser\";});});instance.setToolbarItems(function(items){return items.filter(function(item){return item.type!==\"pan\";});});instance.setToolbarItems(function(items){return items.filter(function(item){return item.type!==\"zoom-mode\";});});instance.setViewState(function(viewState){return viewState.set(\"layoutMode\",\"SINGLE\");});instance.setViewState(function(viewState){return viewState.set(\"scrollMode\",\"PER_SPREAD\");});instance.setViewState(function(viewState){return viewState.set(\"ZoomMode\",\"FIT_TO_VIEWPORT\");});instance.setViewState(function(viewState){return viewState.set(\"spreadSpacing\",5);});instance.setFormFieldValues(dataMap);instance.addEventListener(\"viewState.change\",function(viewState){console.log(viewState.toJS());});instance.addEventListener(\"formFieldValues.update\",function(viewState){//console.log(viewState.toJS());\n//console.log('name: '+viewState.toJS()[0].name+'; value: '+viewState.toJS()[0].value);\ndataMap[String(viewState.toJS()[0].name)]=viewState.toJS()[0].value;//console.log(dataMap);\n});case 25:case\"end\":return _context.stop();}}},_callee);}))();return function(){return PSPDFKit&&PSPDFKit.unload(container);};});return/*#__PURE__*/_jsx(\"div\",{ref:containerRef,style:{width:'100%',height:'100vh'}});}","map":{"version":3,"names":["useEffect","useRef","dataMap","userName","fetcher","fontFileName","fetch","then","r","status","blob","Error","PdfViewerComponent","props","containerRef","customFontsRef","container","current","instance","PSPDFKit","themeFile","Theme","DARK","customFonts","map","font","Font","name","callback","load","licenseKey","document","theme","autoSaveMode","AutoSaveMode","INTELLIGENT","baseUrl","window","location","protocol","host","process","env","PUBLIC_URL","toolbarItems","defaultToolbarItems","type","renderPageCallback","ctx","pageIndex","pageSize","fillStyle","textAlign","fillText","width","height","setToolbarItems","items","filter","item","setViewState","viewState","set","setFormFieldValues","addEventListener","console","log","toJS","String","value","unload"],"sources":["/Users/eli7pm/customFonts.PSPDFKit/src/components/PdfViewerComponent.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\n\r\nimport { dataMap } from '../components/Config';\r\n//const dataMap = {};\r\n\r\nconst userName = 'Дарина Кравчук. Тернопільська ЗОШ №16';\r\n//const userPassword = '';\r\n\r\n\r\n//var arrData = [];\r\n\r\nconst fetcher = (fontFileName) =>\r\n  fetch(fontFileName).then((r) => {\r\n    if (r.status === 200) {\r\n      return r.blob();\r\n    } else {\r\n      throw new Error();\r\n    }\r\n  });\r\n\r\nexport default function PdfViewerComponent(props) {\r\n\tconst containerRef = useRef(null);\r\n\tconst customFontsRef = useRef(null);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconst container = containerRef.current;\r\n\t\tlet instance, PSPDFKit;\r\n\t\t(async function () {\r\n\t\t\tPSPDFKit = await import('pspdfkit');\r\n\t\t\tconst themeFile = PSPDFKit.Theme.DARK;\r\n\t\t\tconst customFonts = [\"CENSCBK.TTF\"].map(\r\n\t\t\t\t(font) => new PSPDFKit.Font({ name: font, callback: fetcher })\r\n\t\t\t);\r\n\r\n\t\t\tcustomFontsRef.current = customFontsRef.current || customFonts\r\n\t\t\tinstance = await PSPDFKit.load({\r\n\r\n\t\t\t\t//Api Key\r\n\t\t\t\t//licensekey: 'pdf_live_eSDqTB2aIiliYAbvHfhZVa9YjorkV95d0aXzPpKuEMS',\r\n\t\t\t\tlicenseKey: \"\",\r\n\t\t\t\t// Container where PSPDFKit should be mounted.\r\n\t\t\t\tcontainer,\r\n\t\t\t\t// The document to open.\r\n\t\t\t\tdocument: props.document,\r\n\t\t\t\t// Theme file\r\n\t\t\t\ttheme: themeFile,\r\n\r\n\t\t\t\tautoSaveMode: PSPDFKit.AutoSaveMode.INTELLIGENT,\r\n\r\n\t\t\t\tcustomFonts: customFontsRef.current,\r\n\t\t\t\t//password: userPassword,\r\n\t\t\t\t// Use the public directory URL as a base URL. PSPDFKit will download its library assets from here.\r\n\t\t\t\tbaseUrl: `${window.location.protocol}//${window.location.host}/${process.env.PUBLIC_URL}`,\r\n\t\t\t\t//password: \"secr3t\",\r\n\r\n\t\t\t\ttoolbarItems: [\r\n\t\t\t\t\t...PSPDFKit.defaultToolbarItems,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t  type: \"form-creator\"\r\n\t\t\t\t\t}\r\n\t\t\t\t  ],\r\n\r\n\t\t\t\t// Watermark\r\n\t\t\t\trenderPageCallback: function (ctx, pageIndex, pageSize) {\r\n\t\t\t\t\tctx.font = \"14px Arial\";\r\n\t\t\t\t\tctx.fillStyle = \"grey\";\r\n\t\t\t\t\tctx.textAlign = \"center\";\r\n\r\n\t\t\t\t\tctx.fillText(\r\n\t\t\t\t\t  userName,\r\n\t\t\t\t\t  pageSize.width / 2,\r\n\t\t\t\t\t  pageSize.height - 13\r\n\t\t\t\t\t);\r\n\t\t\t\t  }\r\n\r\n\r\n\t\t\t});\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t// Lock print and download\r\n\t\t\tinstance.setToolbarItems(items => items.filter((item) => item.type !== \"export-pdf\"));\r\n\t\t\tinstance.setToolbarItems(items => items.filter((item) => item.type !== \"print\"));\r\n\t\t\tinstance.setToolbarItems(items => items.filter((item) => item.type !== \"signature\"));\r\n\t\t\tinstance.setToolbarItems(items => items.filter((item) => item.type !== \"document-editor\"));\r\n\t\t\tinstance.setToolbarItems(items => items.filter((item) => item.type !== \"document-crop\"));\r\n\t\t\tinstance.setToolbarItems(items => items.filter((item) => item.type !== \"line\"));\r\n\t\t\tinstance.setToolbarItems(items => items.filter((item) => item.type !== \"ink-eraser\"));\r\n\t\t\tinstance.setToolbarItems(items => items.filter((item) => item.type !== \"pan\"));\r\n\t\t\tinstance.setToolbarItems(items => items.filter((item) => item.type !== \"zoom-mode\"));\r\n\r\n\t\t\tinstance.setViewState(viewState => (\r\n\t\t\t\tviewState.set(\"layoutMode\", \"SINGLE\")\r\n\t\t\t));\r\n\r\n\t\t\tinstance.setViewState(viewState => (\r\n\t\t\t\tviewState.set(\"scrollMode\", \"PER_SPREAD\")\r\n\t\t\t));\r\n\r\n\t\t\tinstance.setViewState(viewState => (\r\n\t\t\t\tviewState.set(\"ZoomMode\", \"FIT_TO_VIEWPORT\")\r\n\t\t\t));\r\n\r\n\t\t\tinstance.setViewState(viewState => (\r\n\t\t\t\tviewState.set(\"spreadSpacing\", 5)\r\n\t\t\t));\r\n\r\n\t\t\tinstance.setFormFieldValues(dataMap);\r\n\r\n\t\t\tinstance.addEventListener(\"viewState.change\", (viewState) => {\r\n\t\t\t\tconsole.log(viewState.toJS());\r\n\t\t\t});\r\n\r\n\r\n\t\t\tinstance.addEventListener(\"formFieldValues.update\", (viewState) => {\r\n\t\t\t\t//console.log(viewState.toJS());\r\n\t\t\t\t//console.log('name: '+viewState.toJS()[0].name+'; value: '+viewState.toJS()[0].value);\r\n\t\t\t\tdataMap[String(viewState.toJS()[0].name)] = viewState.toJS()[0].value;\r\n\t\t\t\t//console.log(dataMap);\r\n\t\t\t});\r\n\r\n\r\n\r\n\r\n\t\t})();\r\n\r\n\t\treturn () => PSPDFKit && PSPDFKit.unload(container);\r\n\t}, );\r\n\r\n\r\n\r\n\treturn <div ref={containerRef} style={{ width: '100%', height: '100vh' }} />;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}